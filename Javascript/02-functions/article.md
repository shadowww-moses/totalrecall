# Функции

В материале используется информация о контексте выполнения, лексическом окружении и записи окружения. Детальнее об этом я писал в разделе features/EC.LE.ER

## Общая информация

Функция в Javascript - это *объект специального внутреннего типа FunctionObject*, снабженный семантикой вызова. Поэтому с функциями можно работать как и с обычными данными - передавать в качестве параметров, помещать в переменные.

Объект функции имеет свойства:

* **name** - хранит имя (идентификатор) функции
* **scope** - хранит ссылку на лексическое окружение выполняемого в данный момент кода

## Виды функций

Функции условно делятся на:

* Обычные
  * Function Declaration
  * Function Expression
* Стрелочные (лямбды)

### Обычные

#### Function Declaration

```javascript
function sum(x, y) {  // идентификатор функции - sum
  return x + y;
}  // не нужна точка с запятой
```

#### Function Expression

```javascript
var sub = function(x, y) {  // здесь не задан идентификатор функции,
  return x - y;             // sub - идентификатор переменной
};  // точка с запятой обязательна
```

В этом примере у функции нет имени, поэтому мы не можем обратиться к ней внутри нее самой. Но можно дать имя, чтобы такая возможность появилась:

```javascript
let fact = function f(x) {  // идентификатор функции - f,
  return x > 1              // а fact - идентификатор переменной
    ? x * f(x-1)
    : 1;
};

console.log(fact(4));  // 24
console.log(f(4));  // ReferenceError: f is not defined
```

Как видно из примера, это имя - `f` - будет доступно только внутри нее самой.

#### В чем разница?

Во-первых, для обоих видов функций создается FunctionObject, в этом они абсолютно похожи. Разница в том, *когда* он создается и, соответственно,

* **Момент, в который функция становится доступна для использования**

  Когда какой-нибудь код должен выполниться, перед выполнением движок сперва ищет в нем *объявления* переменных и функций и помещает идентификаторы этих переменных и функций в объект EnvironmentRecord в качестве полей.

  